---
  - name: "Testing Ports"
    hosts: all
    gather_facts: "{{ ANSIBLE_GATHERING }}"
    vars:
      ports: 
        - 22
        - 9443
        #- 443
    tasks:
    - name: "Test Connection Telnet"
      ignore_errors: yes
      shell: "telnet 192.168.59.133 {{ item }}"
      register: shell_output
      loop: "{{ ports }}"
      
    - name: Debug output of shell command
      ansible.builtin.debug:
        msg: "Output for {{ item }}: {{ shell_output.results[loop_index].stdout }}"
      loop: "{{ shell_output.results }}"
      loop_control:
         index_var: loop_index

   
